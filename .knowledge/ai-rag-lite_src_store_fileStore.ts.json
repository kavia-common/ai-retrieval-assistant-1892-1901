{"is_source_file": true, "format": "TypeScript", "description": "This file defines the FileVectorStore class, a file-based vector store for managing chunks and embeddings, with capabilities to load, save, add, and search data. It is designed to work in node environments and throws errors if used in browsers.", "external_files": ["../types", "../search/cosine", "fs/promises"], "external_methods": ["rankByCosine"], "published": ["FileVectorStore"], "classes": [{"name": "FileVectorStore", "description": "A JSON file-based vector store for managing chunks and embeddings, supporting load, save, add, and search functionalities in node environments."}], "methods": [{"name": "constructor(filePath: string) { constructor", "description": "Initializes the FileVectorStore with a file path; throws error if in browser environment.", "scope": "FileVectorStore", "scopeKind": "class"}, {"name": "private async load(): Promise<void> { load", "description": "Loads chunks and embeddings from the specified JSON file, with error handling for missing file.", "scope": "FileVectorStore", "scopeKind": "class"}, {"name": "private async save(): Promise<void> { save", "description": "Saves current chunks and embeddings to the JSON file.", "scope": "FileVectorStore", "scopeKind": "class"}, {"name": "async add(chunks: Chunk[]): Promise<void> { add", "description": "Adds new chunks with embeddings to the store and persists to disk.", "scope": "FileVectorStore", "scopeKind": "class"}, {"name": "async search( search", "description": "Performs a cosine similarity-based search to retrieve top-k chunks matching the query embedding.", "scope": "FileVectorStore", "scopeKind": "class"}, {"name": "function isBrowser(): boolean { isBrowser", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["import { VectorStore, Chunk } from \"../types\"", "import { rankByCosine } from \"../search/cosine\"", "import(\"fs/promises\")", "fs.readFile", "JSON.parse", "fs.writeFile", "rankByCosine"], "search-terms": ["FileVectorStore", "vector store", "chunk management", "embedding search", "JSON file-based"], "state": 2, "file_id": 18, "knowledge_revision": 38, "git_revision": "", "ctags": [{"_type": "tag", "name": "FileVectorStore", "path": "/home/kavia/workspace/code-generation/ai-retrieval-assistant-1892-1901/ai-rag-lite/src/store/fileStore.ts", "pattern": "/^export class FileVectorStore implements VectorStore {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "add", "path": "/home/kavia/workspace/code-generation/ai-retrieval-assistant-1892-1901/ai-rag-lite/src/store/fileStore.ts", "pattern": "/^  async add(chunks: Chunk[]): Promise<void> {$/", "language": "TypeScript", "kind": "method", "scope": "FileVectorStore", "scopeKind": "class"}, {"_type": "tag", "name": "c", "path": "/home/kavia/workspace/code-generation/ai-retrieval-assistant-1892-1901/ai-rag-lite/src/store/fileStore.ts", "pattern": "/^    for (const c of chunks) {$/", "language": "TypeScript", "kind": "constant", "scope": "FileVectorStore.add", "scopeKind": "method"}, {"_type": "tag", "name": "chunks", "path": "/home/kavia/workspace/code-generation/ai-retrieval-assistant-1892-1901/ai-rag-lite/src/store/fileStore.ts", "pattern": "/^  private chunks: Chunk[] = [];$/", "language": "TypeScript", "kind": "property", "scope": "FileVectorStore", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/ai-retrieval-assistant-1892-1901/ai-rag-lite/src/store/fileStore.ts", "pattern": "/^  constructor(filePath: string) {$/", "language": "TypeScript", "kind": "method", "scope": "FileVectorStore", "scopeKind": "class"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/ai-retrieval-assistant-1892-1901/ai-rag-lite/src/store/fileStore.ts", "pattern": "/^      const data = await fs.readFile(this.filePath, \"utf-8\");$/", "language": "TypeScript", "kind": "constant", "scope": "FileVectorStore.load", "scopeKind": "method"}, {"_type": "tag", "name": "embeddings", "path": "/home/kavia/workspace/code-generation/ai-retrieval-assistant-1892-1901/ai-rag-lite/src/store/fileStore.ts", "pattern": "/^  private embeddings: number[][] = [];$/", "language": "TypeScript", "kind": "property", "scope": "FileVectorStore", "scopeKind": "class"}, {"_type": "tag", "name": "filePath", "path": "/home/kavia/workspace/code-generation/ai-retrieval-assistant-1892-1901/ai-rag-lite/src/store/fileStore.ts", "pattern": "/^  private filePath: string;$/", "language": "TypeScript", "kind": "property", "scope": "FileVectorStore", "scopeKind": "class"}, {"_type": "tag", "name": "fs", "path": "/home/kavia/workspace/code-generation/ai-retrieval-assistant-1892-1901/ai-rag-lite/src/store/fileStore.ts", "pattern": "/^    const fs = await import(\"fs\\/promises\");$/", "language": "TypeScript", "kind": "constant", "scope": "FileVectorStore.load", "scopeKind": "method"}, {"_type": "tag", "name": "fs", "path": "/home/kavia/workspace/code-generation/ai-retrieval-assistant-1892-1901/ai-rag-lite/src/store/fileStore.ts", "pattern": "/^    const fs = await import(\"fs\\/promises\");$/", "language": "TypeScript", "kind": "constant", "scope": "FileVectorStore.save", "scopeKind": "method"}, {"_type": "tag", "name": "isBrowser", "path": "/home/kavia/workspace/code-generation/ai-retrieval-assistant-1892-1901/ai-rag-lite/src/store/fileStore.ts", "pattern": "/^function isBrowser(): boolean {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "json", "path": "/home/kavia/workspace/code-generation/ai-retrieval-assistant-1892-1901/ai-rag-lite/src/store/fileStore.ts", "pattern": "/^      const json = JSON.parse(data);$/", "language": "TypeScript", "kind": "constant", "scope": "FileVectorStore.load", "scopeKind": "method"}, {"_type": "tag", "name": "json", "path": "/home/kavia/workspace/code-generation/ai-retrieval-assistant-1892-1901/ai-rag-lite/src/store/fileStore.ts", "pattern": "/^    const json = JSON.stringify($/", "language": "TypeScript", "kind": "constant", "scope": "FileVectorStore.save", "scopeKind": "method"}, {"_type": "tag", "name": "load", "path": "/home/kavia/workspace/code-generation/ai-retrieval-assistant-1892-1901/ai-rag-lite/src/store/fileStore.ts", "pattern": "/^  private async load(): Promise<void> {$/", "language": "TypeScript", "kind": "method", "scope": "FileVectorStore", "scopeKind": "class"}, {"_type": "tag", "name": "loaded", "path": "/home/kavia/workspace/code-generation/ai-retrieval-assistant-1892-1901/ai-rag-lite/src/store/fileStore.ts", "pattern": "/^  private loaded = false;$/", "language": "TypeScript", "kind": "property", "scope": "FileVectorStore", "scopeKind": "class"}, {"_type": "tag", "name": "ranked", "path": "/home/kavia/workspace/code-generation/ai-retrieval-assistant-1892-1901/ai-rag-lite/src/store/fileStore.ts", "pattern": "/^    const ranked = rankByCosine(this.embeddings, queryEmbedding, topK);$/", "language": "TypeScript", "kind": "constant", "scope": "FileVectorStore.search", "scopeKind": "method"}, {"_type": "tag", "name": "save", "path": "/home/kavia/workspace/code-generation/ai-retrieval-assistant-1892-1901/ai-rag-lite/src/store/fileStore.ts", "pattern": "/^  private async save(): Promise<void> {$/", "language": "TypeScript", "kind": "method", "scope": "FileVectorStore", "scopeKind": "class"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/ai-retrieval-assistant-1892-1901/ai-rag-lite/src/store/fileStore.ts", "pattern": "/^  async search($/", "language": "TypeScript", "kind": "method", "scope": "FileVectorStore", "scopeKind": "class"}], "hash": "3fe803acc21751ba2a138139253df294", "format-version": 4, "code-base-name": "frontend", "filename": "ai-rag-lite/src/store/fileStore.ts", "fields": [{"name": "private chunks: Chunk[] = [];", "scope": "FileVectorStore", "scopeKind": "class", "description": "unavailable"}, {"name": "private embeddings: number[][] = [];", "scope": "FileVectorStore", "scopeKind": "class", "description": "unavailable"}, {"name": "private filePath: string;", "scope": "FileVectorStore", "scopeKind": "class", "description": "unavailable"}, {"name": "private loaded = false;", "scope": "FileVectorStore", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"38": ""}]}